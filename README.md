# Анализ сайта lifehacker.ru
### Обнаруженные проблемы
1. 3+ секунды до First Meaningful Paint на 3g соединении. При первой загрузке пользователь 3 секунды смотрит в белый экран.

Решение: 

- В `head` сайта лежит несколько скриптов блокирующих отрисовку
![scripts_1](https://i.imgur.com/I8R3PcF.png)

![scripts_2](https://i.imgur.com/7BtBmrn.png)

Этим скриптам стоит добавить атрибут async либо defer (равно как и скриптам без этих атрибутов, которые лежат в конце `body`)

- Грузится много блокирующих css скриптов

![css_1](https://i.imgur.com/oHFGCcx.png)

При том что на главной используется лишь малый процент стилей

![css_2](https://i.imgur.com/B1R1Ue4.png)

Зачем то грузится несколько css файлов, которые не используются, среди них font-awsome.min.css задерживает первую отрисовку аж на 1.2+ секунды!

![css_3](https://i.imgur.com/exAP1HM.png)

Следует вынести критически важные для страницы скрипты в инлайн, либо в отдельный файл при возможности использования HTTP/2 Server Push (так мы получим кэширование даже того, что пришлось бы каждый раз грузить в инлайне). А остальные стили загружать одним из двух способов:

* с помощью хака - установки скриптам несуществующего медиа на время загрузки

```
<link rel="stylesheet" href="css.css" media="none" onload="if(media!='all')media='all'">
<noscript><link rel="stylesheet" href="css.css"></noscript> <!-- фолбэк для браузеров без js-->
```

Возможные минусы: в [статье](https://keithclark.co.uk/articles/loading-css-without-blocking-render/)
говорится о том, что разработчики репортят проблемы с таким подходом в IE и FF 
, в то время как другие отмечают хорошие результаты в Chrome и Safari (2015г)

* с помощью более современного способа с помощью `rel="preload"` + [полифила для кроссбраузерности](https://github.com/filamentgroup/loadCSS)
```
<link rel="preload" href="path/to/mystylesheet.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="path/to/mystylesheet.css"></noscript>
```

- Часть css и js файлов не минифицированы. Следует исправить.

- Пользователь, у которого еще не загружены шрифты Roboto и Roboto Condensed скорее всего не дождется загрузки страницы, потому что тот кто добавил шрифты на сайт сделал вот так:

Судя по тому, какие шрифты в действительности используются, достаточно оставить галочки только на `regualr`, `bold`, `latin` и `cyrillic`.

- Для контентных изображений можно было бы использовать теги `picture` + `source` + `img` для адаптивности, попутно стараться отдавать картинки в webp для браузеров, которые поддерживают этот формат.


